--[[https://github.com/Nebula-Softworks/Luna-Interface-Suite/blob/main/Documentation.md]]
local Luna = loadstring(game:HttpGet("https://raw.githubusercontent.com/Nebula-Softworks/Luna-Interface-Suite/refs/heads/master/source.lua", true))()

local Window = Luna:CreateWindow({
	Name = "SLEEP HUB PRO MAX", -- This Is Title Of Your Window
	Subtitle = "A Gray Subtitle", -- A Gray Subtitle next To the main title.
	LogoID = "113876946783161", -- The Asset ID of your logo. Set to nil if you do not have a logo for Luna to use.
	LoadingEnabled = true, -- Whether to enable the loading animation. Set to false if you do not want the loading screen or have your own custom one.
	LoadingTitle = "WELCOME TO SLEEP HUB PRO MAXe", -- Header for loading screen
	LoadingSubtitle = "by SLEEP HUB", -- Subtitle for loading screen

	ConfigSettings = {
		RootFolder = nil, -- The Root Folder Is Only If You Have A Hub With Multiple Game Scripts and u may remove it. DO NOT ADD A SLASH
		ConfigFolder = "Big Hub" -- The Name Of The Folder Where Luna Will Store Configs For This Script. DO NOT ADD A SLASH
	},

	KeySystem = false, -- As Of Beta 6, Luna Has officially Implemented A Key System!
	KeySettings = {
		Title = "SPEEL HUB Key",
		Subtitle = "Key System",
		Note = "Best Key System Ever! Also, Please Use A HWID Keysystem like Pelican, Luarmor etc. that provide key strings based on your HWID since putting a simple string is very easy to bypass, the key is 1234!",
		SaveInRoot = false, -- Enabling will save the key in your RootFolder (YOU MUST HAVE ONE BEFORE ENABLING THIS OPTION)
		SaveKey = true, -- The user's key will be saved, but if you change the key, they will be unable to use your script
		Key = {"1234"},
		SecondAction = {
			Enabled = true,
			Type = "Link", -- You can also put discord as an option, if your are doing that, don’t include discord.gg as Luna will auto add it as a prefix, just replace it with your identifier, example, if your are doing discord.gg/mspaint, just use mspaint.
			Parameter = ""
		}
	}
})

Window:CreateHomeTab({
	SupportedExecutors = {
		"Synapse X",
		"Krnl",
		"ProtoSmasher",
		"Fluxus",
		"Script-Ware",
		"EasyExploits",
		"Electron",
		"JJSploit",
		"Calamari",
		"SirHurt",
		"Sentinel",
		"WEAREDEVS",
		"Comet",
		"Cellery",
		"Wave",
		"CODex",
		"Delta"
	},
	DiscordInvite = "1234", -- same thing here
	Icon = 1
})

local Tab = Window:CreateTab({
    Name = "ออโต้ฟาร์ม",
    Icon = "view_in_ar",
    ImageSource = "Material",
    ShowTitle = true -- This will determine whether the big header text in the tab will show
})

Tab:CreateSection("Section Example")








local isToggled = false

local Toggle = Tab:CreateToggle({
    Name = "ออโค้ขุด(OP)",
    Description = nil,
    CurrentValue = false,
    Callback = function(Value)
        isToggled = Value
        
        if Value then
            task.spawn(function()
                while isToggled do
                    local args = {
                        "Block_1_1",
                        0
                    }
                    game:GetService("ReplicatedStorage")
                        :WaitForChild("Packages")
                        :WaitForChild("_Index")
                        :WaitForChild("sleitnick_knit@1.5.1")
                        :WaitForChild("knit")
                        :WaitForChild("Services")
                        :WaitForChild("FightService")
                        :WaitForChild("RE")
                        :WaitForChild("HitBlock")
                        :FireServer(unpack(args))
                    
                    task.wait(0)
                end
            end)
        end
    end
}, "Toggle")











local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local trainService = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_knit@1.5.1"):WaitForChild("knit"):WaitForChild("Services"):WaitForChild("TrainService"):WaitForChild("RE")
local runTrainRemote = trainService:WaitForChild("RunTrain")

local anvilLoop = nil
local currentConnection = nil

-- Function to parse strength text (handles K, M suffixes)
local function parseStrength(text)
    if not text then return 0 end
    text = tostring(text):gsub(",", ""):gsub("%s+", "")
    
    local num = text:match("^[%d%.]+")
    if not num then return 0 end
    
    num = tonumber(num)
    if text:find("K") or text:find("k") then
        num = num * 1000
    elseif text:find("M") or text:find("m") then
        num = num * 1000000
    elseif text:find("B") or text:find("b") then
        num = num * 1000000000
    end
    
    return num
end

-- Get player strength
local function getPlayerStrength()
    local character = player.Character
    if not character then return 0 end
    
    local playerDisplay = character:FindFirstChild("PlayerDisplayName")
    if not playerDisplay then return 0 end
    
    local strengthLabel = playerDisplay:FindFirstChild("StrengthLabel")
    if not strengthLabel then return 0 end
    
    local textObj = strengthLabel:FindFirstChild("Text")
    if textObj then
        return parseStrength(textObj.Text)
    end
    
    return parseStrength(strengthLabel.Text)
end

-- Get anvil requirement
local function getAnvilRequirement(anvilNumber)
    local anvilPath = Workspace:FindFirstChild("Areas") 
        and Workspace.Areas:FindFirstChild("Area_1") 
        and Workspace.Areas.Area_1:FindFirstChild("Anvils") 
        and Workspace.Areas.Area_1.Anvils:FindFirstChild("Anvil_1_" .. anvilNumber)
    
    if not anvilPath then return nil end
    
    local titleGuiPart = anvilPath:FindFirstChild("TitleGuiPart")
    if not titleGuiPart then return nil end
    
    local anvilTitleGui = titleGuiPart:FindFirstChild("AnvilTitleGui")
    if not anvilTitleGui then return nil end
    
    local frame = anvilTitleGui:FindFirstChild("Frame")
    if not frame then return nil end
    
    local requiredLabel = frame:FindFirstChild("RequiredLabel")
    if not requiredLabel then return nil end
    
    local textObj = requiredLabel:FindFirstChild("Text")
    if textObj then
        return parseStrength(textObj.Text)
    end
    
    return parseStrength(requiredLabel.Text)
end

-- Find best available anvil
local function getBestAnvil()
    local playerStrength = getPlayerStrength()
    local bestAnvil = "Anvil_1_1" -- Default to first anvil
    
    for i = 1, 6 do
        local requirement = getAnvilRequirement(i)
        if requirement and playerStrength >= requirement then
            bestAnvil = "Anvil_1_" .. i
        else
            break -- Stop checking if we find one we can't afford
        end
    end
    
    return bestAnvil
end

local Toggle = Tab:CreateToggle({
    Name = "ออโต้ฟาร์มพลัง",
    Description = "",
    CurrentValue = false,
    Callback = function(Value)
        if Value then
            -- Start loop
            local lastAnvil = ""
            
            currentConnection = RunService.Heartbeat:Connect(function()
                if not anvilLoop then
                    anvilLoop = tick()
                end
                
                if tick() - anvilLoop >= 0 then
                    anvilLoop = tick()
                    
                    local bestAnvil = getBestAnvil()
                    
                    -- Only fire if anvil changed or first run
                    if bestAnvil ~= lastAnvil then
                        lastAnvil = bestAnvil
                    end
                    
                    local args = {bestAnvil}
                    runTrainRemote:FireServer(unpack(args))
                end
            end)
        else
            -- Stop loop
            if currentConnection then
                currentConnection:Disconnect()
                currentConnection = nil
            end
            anvilLoop = nil
        end
    end
}, "Toggle")











-- เก็บค่าเลือกปัจจุบัน (ตั้งค่าเริ่มต้นตาม Options ของคุณ)
local currentSelection = "Egg_1_1"

local Dropdown = Tab:CreateDropdown({
    Name = "เลือกไช่",
    Description = nil,
    Options = {"Egg_1_1","Egg_1_2","Egg_1_3"},
    CurrentOption = {"Egg_1_1"},
    MultipleOptions = false,
    SpecialType = nil,
    Callback = function(Option)
        -- ถ้าเป็น table (กรณี MultipleOptions) ให้ดึงตัวแรกมา
        if type(Option) == "table" then
            currentSelection = Option[1]
        else
            currentSelection = Option
        end
    end
}, "Dropdown")

-- ฟังก์ชันส่งคำขอไปยังเซิร์ฟเวอร์ (ใช้ pcall กัน error)
local function sendHatch(selection)
    local ok, err = pcall(function()
        local repl = game:GetService("ReplicatedStorage")
        repl:WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_knit@1.5.1")
            :WaitForChild("knit"):WaitForChild("Services"):WaitForChild("EggHatchService")
            :WaitForChild("RE"):WaitForChild("Hatch"):FireServer(selection, 1)
    end)
    if not ok then
        warn("Hatch FireServer failed:", err)
    end
end

-- Toggle ให้ทำงานทุก ๆ 0.1 วินาทีเมื่อเปิด
local running = false
local Toggle = Tab:CreateToggle({
    Name = "ออโต้เปิดไข่",
    CurrentValue = false,
    Callback = function(v)
        running = v
        if v then
            -- สร้าง task แยก ไม่บล็อก UI
            task.spawn(function()
                while running do
                    -- ใช้ค่าที่เลือกจาก Dropdown
                    sendHatch(currentSelection)
                    task.wait(0) -- รอ 0.1 วินาที
                end
            end)
        end
    end
}, "Toggle")





















local running = false

local Toggle = Tab:CreateToggle({
    Name = "ออโต้ฟาร์มเจม (ใช้คู่กับออโต้ขุด)",
    CurrentValue = false,
    Callback = function(Value)
        running = Value

        if running then
            task.spawn(function()
                while running do
                    -- AreaService
                    game:GetService("ReplicatedStorage")
                        :WaitForChild("Packages")
                        :WaitForChild("_Index")
                        :WaitForChild("sleitnick_knit@1.5.1")
                        :WaitForChild("knit")
                        :WaitForChild("Services")
                        :WaitForChild("AreaService")
                        :WaitForChild("RE")
                        :WaitForChild("UpdatePlayerCurrentArea")
                        :FireServer("Area_1")

                    -- FightService
                    game:GetService("ReplicatedStorage")
                        :WaitForChild("Packages")
                        :WaitForChild("_Index")
                        :WaitForChild("sleitnick_knit@1.5.1")
                        :WaitForChild("knit")
                        :WaitForChild("Services")
                        :WaitForChild("FightService")
                        :WaitForChild("RE")
                        :WaitForChild("QuitContestEvent")
                        :FireServer("Area_1")

                    task.wait(0.1) -- ทำงานทุก 0.1 วินาที
                end
            end)
        end
    end
}, "Toggle")
























local running = false

local Toggle = Tab:CreateToggle({
    Name = "ออโต้ Rebirth",
    CurrentValue = false,
    Callback = function(Value)
        running = Value

        if running then
            task.spawn(function()
                while running do
                    game:GetService("ReplicatedStorage")
                        :WaitForChild("Packages")
                        :WaitForChild("_Index")
                        :WaitForChild("sleitnick_knit@1.5.1")
                        :WaitForChild("knit")
                        :WaitForChild("Services")
                        :WaitForChild("RebirthService")
                        :WaitForChild("RF")
                        :WaitForChild("Rebirth")
                        :InvokeServer()

                    task.wait(0.1) -- ทำงานทุก 0.1 วินาที
                end
            end)
        end
    end
}, "Toggle")













local running = false

local Toggle = Tab:CreateToggle({
    Name = "ออโต้สวมใส่/ออโต้คราฟ",
    Description = nil,
    CurrentValue = false,
    Callback = function(Value)
        running = Value

        if running then
            task.spawn(function()
                while running do
                    local RS = game:GetService("ReplicatedStorage")

                    RS.Packages._Index["sleitnick_knit@1.5.1"].knit
                        .Services.PetService.RE.EquipBestPets:FireServer()

                    RS.Packages._Index["sleitnick_knit@1.5.1"].knit
                        .Services.PetService.RE.EnlargeAllPets:FireServer()

                    task.wait(6) -- ทำงานทุก 0.1 วินาที
                end
            end)
        end
    end
}, "Toggle")









-- เก็บ Remote ไว้ก่อนเพื่อไม่ต้องหาซ้ำทุกครั้ง
local Remote = game:GetService("ReplicatedStorage")
    :WaitForChild("Packages")
    :WaitForChild("_Index")
    :WaitForChild("sleitnick_knit@1.5.1")
    :WaitForChild("knit")
    :WaitForChild("Services")
    :WaitForChild("FightService")
    :WaitForChild("RE")
    :WaitForChild("GetTrophyEvent")

local isRunning = false
local loopThread = nil

local Toggle = Tab:CreateToggle({
    Name = "ออโต้ฟาร์มวิน",
    Description = "ระวังค้าง!!",
    CurrentValue = false,
    Callback = function(Value)
        isRunning = Value
        
        if Value then
            -- เปิด Toggle -> เริ่มลูป
            loopThread = task.spawn(function()
                while isRunning do
                    local success, err = pcall(function()
                        Remote:FireServer()
                    end)
                    
                    if not success then
                        warn("Error: " .. tostring(err))
                    end
                    
                    task.wait(0) -- ทำงานทุก 0.1 วินาที (ปรับได้)
                end
            end)
        else
            -- ปิด Toggle -> หยุดลูป (isRunning = false จะทำให้ while หยุดเอง)
            if loopThread then
                task.cancel(loopThread)
                loopThread = nil
            end
        end
    end
}, "AutoTrophyToggle")



























local Tab = Window:CreateTab({
    Name = "ฟังชั่นเสริม",
    Icon = "view_in_ar",
    ImageSource = "Material",
    ShowTitle = true -- This will determine whether the big header text in the tab will show
})












local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- ค่าเริ่มต้น
local walkSpeedValue = 16
local jumpPowerValue = 50

local walkToggle = false
local jumpToggle = false

-- ฟังก์ชันดึง Humanoid
local function getHumanoid()
    local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    return char:WaitForChild("Humanoid")
end

-- ===================== SLIDER เดิน =====================
Tab:CreateSlider({
    Name = "ปรับความเร็วการเดิน",
    Range = {0, 200},
    Increment = 5,
    CurrentValue = 16,
    Callback = function(Value)
        walkSpeedValue = Value
        if walkToggle then
            getHumanoid().WalkSpeed = walkSpeedValue
        end
    end
}, "Slider")

-- ===================== SLIDER กระโดด =====================
Tab:CreateSlider({
    Name = "ปรับการกระโดด",
    Range = {0, 200},
    Increment = 5,
    CurrentValue = 50,
    Callback = function(Value)
        jumpPowerValue = Value
        if jumpToggle then
            getHumanoid().JumpPower = jumpPowerValue
        end
    end
}, "Slider")

-- ===================== TOGGLE เดิน =====================
Tab:CreateToggle({
    Name = "การเดิน",
    CurrentValue = false,
    Callback = function(Value)
        walkToggle = Value
        local humanoid = getHumanoid()

        if Value then
            humanoid.WalkSpeed = walkSpeedValue
        else
            humanoid.WalkSpeed = 16 -- ค่าเดิม Roblox
        end
    end
}, "Toggle")

-- ===================== TOGGLE กระโดด =====================
Tab:CreateToggle({
    Name = "การกระโดด",
    CurrentValue = false,
    Callback = function(Value)
        jumpToggle = Value
        local humanoid = getHumanoid()

        if Value then
            humanoid.JumpPower = jumpPowerValue
        else
            humanoid.JumpPower = 50 -- ค่าเดิม Roblox
        end
    end
}, "Toggle")








local ConfigTab = Window:CreateTab({
	Name = "Config Tab",
	Icon = "settings",
	ImageSource = "Material",
	ShowTitle = true
})

ConfigTab:BuildConfigSection()
